hostname ext

interface out_dmz
ip access-group 103 in
ip address 10.100.1.2 255.255.0.0

interface out_inet
ip access-group 104 in
ip address 10.200.1.1 255.255.0.0

! TODO: require reflect X to appear before evaluate X
! or the parser will not properly add

! applied to dmz side (internal)
! apply racl to post-nat traffic (from int's gateway)
ip access-list extended 103
  deny ip any host 10.200.100.100
  deny tcp any any eq 23
  permit tcp host 10.100.1.1 any eq 80 reflect returnflow
  permit tcp host 10.100.1.1 any eq 22 reflect returnflow
  deny any


! applied to inet side (external)
ip access-list extended 104
  deny host 10.200.100.100
  permit tcp any host 10.100.1.5 eq 25
  permit tcp any host 10.100.1.10 eq 80
  evaluate returnflow
  deny any

! don't need a route to int's LAN (will be via nat to 10.100.1.1, which is local)
ip route 0.0.0.0 0.0.0.0 10.200.1.2



! TODO: comment in middle of block breaks the parser :-(

! next line was 192.168.1.2, but it should be the NAT, not a 192.168.x


! added for return traffic to NAT
! permit tcp any host 10.1.1.1
